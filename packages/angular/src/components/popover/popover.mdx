import { Meta, Canvas, Controls, Primary } from '@storybook/addon-docs/blocks'
import * as PopoverStories from './popover.stories.ts'

<Meta of={PopoverStories} />

# Popover

`Popover` vises over andre elementer i grensesnittet og er koblet til et spesifikt element. Den brukes til å vise tilleggsinformasjon, interaktive elementer eller korte forklaringer uten å navigere bort fra siden. `Popover` kan brukes som en utvidet løsning når [`Tooltip`](/docs/komponenter-tooltip--docs) ikke strekker til.

<Primary />
<Controls />

## Bruk

```tsx

<button ksd-button variant="primary"  popovertarget="my-popover"> Enkel popover </button>
<ksd-popover popoverId="my-popover"> Her er det noe innhold </ksd-popover>
```

### Polyfill

`Popover` bruker [popover (mozilla.org)](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Global_attributes/popover). Dette apiet er klassifisert som [Baseline: Newly available (mozilla.org)](https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility) fra april 2024, da Firefox som siste nettleser la det til. I noen tilfeller kan en oppleve at brukere av ulike grunner er låst til eldre nettleserversjoner, og da kan det være aktuelt å legge til en [Popover-Polyfill (github.com)](https://github.com/oddbird/popover-polyfill) for å sikre at `Popover` fungerer for alle.

## Kodeeksempler

### Farger

`Popover` kommer i alle farger, du kan endre den med `data-color`.
Du kan også sette `variant` direkte for å endre bakgrunnsfarge.

### Kontrollert

Dersom du sender inn `open`, så bruker du `popover` kontrollert. Du kan bruke `triggeredClose` for å få beskjed når `popover` vil lukkes.
Dette er nyttig dersom du har innhold som skal lukke `popover` når du klikker på det.

```tsx

<button ksd-button popovertarget="my-popover">Kontrollert popover</button>
<ksd-popover id="my-popover"  [open]="isPopoverOpen()" (triggeredClose)="setPopoverClosed()">
    <p>Her er det noe innhold</p>
      <button
        ksd-button
        variant="secondary"
        data-color="danger"
        (click)="setPopoverClosed()"
      >
        Lukk popover
      </button>
</ksd-popover>
```

<Canvas of={PopoverStories.Controlled} />

## Retningslinjer

`Popover` brukes for å vise mer detaljert eller interaktiv tilleggsinformasjon uten å ta brukeren bort fra konteksten. Den åpnes ved et bevisst brukerklikk og kan inneholde både tekst, lenker og enkle skjemaelementer. Innholdet bør være kort og relevant, og ikke kritisk for å fullføre oppgaven.

**Passer til:**

- Utfyllende forklaringer som krever mer plass enn en kort [`Tooltip`](/docs/komponenter-tooltip--docs), f.eks. definisjoner eller utdypende instruksjoner.
- Kontekstspesifikk hjelp som brukeren kan velge å åpne/lukke uten å forlate siden.
- Visning av tilleggsinformasjon som ikke er kritisk for å fullføre oppgaven, men som kan være nyttig for enkelte brukere.

**Passer ikke til:**

- Å beskrive et symbol eller tastatursnartvei, bruk heller [`Tooltip`](/docs/komponenter-tooltip--docs).
- Navigasjon eller valg av alternativer (bruk [`Dropdown`](/docs/komponenter-dropdown--docs) i stedet)
- Å vise innhold ved `hover`.

### Plassering

`Popover` plasseres etter ønske, men holder seg automatisk innenfor det synlige området i nettleseren. Denne oppførselen kan deaktiveres med `autoPlacement`.

## Tekst

Unngå lange tekster og kompliserte forklaringer. I noen tilfeller er det kanskje bedre å lenke til en annen side med utdypende informasjon om temaet.

## Tilgjengelighet

Det er innebygd tilgjengelighet i [Popover APIet (mozilla.org)](https://developer.mozilla.org/en-US/docs/Web/API/Popover_API) i henhold til åpne/lukket tilstand og tastatur navigasjon.
