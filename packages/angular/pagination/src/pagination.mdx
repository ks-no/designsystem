import {
  Meta,
  Primary,
  Canvas,
  Controls,
  Story,
} from '@storybook/addon-docs/blocks'

import * as PaginationStories from './pagination.stories'

<Meta of={PaginationStories} />

# Pagination

Pagination er en liste med knapper eller lenker som brukes for å navigere mellom ulike sider med innhold, for eksempel søkeresultater eller tabeller.

<Primary />
<Controls />

## Bruk

```ts
import { Button } from '@ks-digital/designsystem-angular/button'
import { Pagination } from '@ks-digital/designsystem-angular/pagination'

<nav ksd-pagination aria-label="Sidenavigering">
  <ul>
    <li>
      <button
        ksd-button
        data-variant="tertiary"
        type="button"
        aria-label="Forrige side"
      >
        Forrige
      </button>
    </li>
    <li>
      <button
        ksd-button
        data-variant="tertiary"
        type="button"
        aria-label="Side 1"
      >
        1
      </button>
    </li>
    <li>
      <button
        ksd-button
        data-variant="primary"
        type="button"
        aria-label="Side 2"
      >
        2
      </button>
    </li>
    <li></li>
    <li>
      <button
        ksd-button
        data-variant="tertiary"
        type="button"
        aria-label="Side 9"
      >
        9
      </button>
    </li>
    <li>
      <button
        ksd-button
        data-variant="tertiary"
        type="button"
        aria-label="Side 10"
      >
        10
      </button>
    </li>
    <li>
      <button
        ksd-button
        data-variant="tertiary"
        type="button"
        aria-label="Neste side"
      >
        Neste
      </button>
    </li>
  </ul>
</nav>
```

## Som lenker

Erstatt knappene med lenker hvis pagineringen skal navigere til en ny side.

<Canvas of={PaginationStories.WithAnchor} />

## Responsiv visning

På små skjermer er det lurt å begrense antall synlige sidetall for å spare plass. Vis kun:

- den aktive siden
- én side før og etter

<Canvas of={PaginationStories.Mobile} />

## Med Angular Router

Bruk `pagination`-hjelpefunksjonen fra `@digdir/designsystemet-web` sammen med Angular Router for dynamisk paginering:

```ts
import { Component, computed, signal } from '@angular/core'
import { RouterLink } from '@angular/router'
import { pagination } from '@digdir/designsystemet-web'

@Component({
  imports: [RouterLink],
  template: `
    <nav class="ds-pagination" aria-label="Sidenavigering">
      <ol>
        <li>
          <a
            class="ds-button"
            data-variant="tertiary"
            [routerLink]="['/results']"
            [queryParams]="{ page: pager().prev }"
            [attr.aria-hidden]="!pager().prev"
            [attr.tabindex]="pager().prev ? null : -1"
          >
            Forrige
          </a>
        </li>
        @for (p of pager().pages; track p.key) {
          <li>
            <a
              class="ds-button"
              [attr.data-variant]="p.current ? 'primary' : 'tertiary'"
              [routerLink]="['/results']"
              [queryParams]="{ page: p.page }"
              [attr.aria-current]="p.current ? 'page' : null"
              [attr.aria-hidden]="!p.page || null"
              [attr.tabindex]="p.page ? null : -1"
            >
              {{ p.page }}
            </a>
          </li>
        }
        <li>
          <a
            class="ds-button"
            data-variant="tertiary"
            [routerLink]="['/results']"
            [queryParams]="{ page: pager().next }"
            [attr.aria-hidden]="!pager().next"
            [attr.tabindex]="pager().next ? null : -1"
          >
            Neste
          </a>
        </li>
      </ol>
    </nav>
  `,
})
export class SearchResultsComponent {
  current = signal(5)
  total = signal(50)

  pager = computed(() =>
    pagination({ current: this.current(), total: this.total(), show: 7 }),
  )
}
```
